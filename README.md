This is the working example of an 8 axis 32 button controller.

You really just need to patch:
usb_desc.h
usb_desc.c
usb_joystick.h
